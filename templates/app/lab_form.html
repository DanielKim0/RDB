{% extends "base.html" %}
{% load widget_tweaks %}

{% block title %}Lab Form{% endblock %} 

{% block content %}
<body class="w3-animate-opacity top-padding">
	<form method="POST" enctype="multipart/form-data">
		{% csrf_token %}
		<div class="mid-padding left d-flex flex-column">
			<div class="header2 d-flex row-to-col flex-row flex-wrap">
				<p>Lab Name:</p>
				{{ form.name | add_class:"w-100" }}
				{{ form.name.errors }}
			</div>
			<hr class="blue1" style="width: 100%">
			<p class="mb-0 header5 no-space">All edits will be saved automatically.</p>
			<div class="d-flex justify-content-between row-to-col flex-wrap">
				<div class="body3 m-3" style="margin-bottom: 0px !important;">
					<div class="mt-3">
						<p>PI:
							{{ form.pi_name }}
							{{ form.pi_name.errors }}
						</p>
					</div>
					<div class="mt-3">
						<p>PI NetID:
							{{ form.pi_id }}
							{{ form.pi_id.errors }}
						</p>
					</div>
					<div class="mt-3">
						<p>Department:
							{{ form.department }}
							{{ form.department.errors }}
						</p>
					</div>
					<div class="mt-3">
						<p> Email:
							{{ form.email }}
							{{ form.email.errors }}
						</p>
					</div>
					<div class="mt-3">
						<p> Website:
							{{ form.website }}
							{{ form.website.errors }}
						</p>
					</div>
					<div class="mt-3">
						<p> Mentoring:
							{{ form.mentors }}
							{{ form.mentors.errors }}
						</p>
					</div>
					<div class="mt-3">
						<p> Funded:
							{{ form.funded }}
							{{ form.funded.errors }}
						</p>
					</div>
					<div class="mt-3">
						<p> Accepting Undergraduates:
							{{ form.accept_undergrads }}
							{{ form.accept_undergrads.errors }}
						</p>
					</div>
					<div class="mt-3">
						<p> Accepting Graduates:
							{{ form.accept_grads }}
							{{ form.accept_grads.errors }}
						</p>
					</div>
					<div class="mt-3">
						<p> Remote:
							{{ form.work_remote }}
							{{ form.work_remote.errors }}
						</p>
					</div>
					<div class="mt-3">
						<p> On Campus:
							{{ form.work_in_person }}
							{{ form.work_in_person.errors }}
						</p>
					</div>
					<!-- <div class="mt-3">
						<label class="switch">
							<input id="slider" type="checkbox"> <span class="slider round"></span> </label>
						<p id="status">Not Accepting Undergraduates</p>
					</div> -->
				</div>
				<div></div>
				<div class="body m-3 flex-grow-1" style="margin-bottom: 0px !important;">
					<p>Lab Description:</p>
					<div>
						{{ form.project_desc | add_class:"word_count" }}
						{{ form.project_desc.errors }}
					</div>
					<div class="align-right sbody3"> <span id="display_count">0</span>/500 </div>
				</div>
			</div>
			<hr class="blue1" style="width:100%">
			<p class="mb-0 header5 no-space">To allow other individuals to edit this page, please enter their NetID:</p>
			<div class="p-0 m-3 float-container">
				<div class="mb-3 float-child4">
					<input placeholder="NetID" name="netID" type="text" autocomplete="off"> </div>
				<div class="float-child4">
					<button type="button" id="add" class="btn btn-outline-secondary btn-sm btn-block rounded-0 buttonblue">Add</button>
				</div>
			</div>
		</div>
		<input type="submit" value="Submit" style="margin-bottom: 5rem; width: 30%;">
	</form>

	<script>
		// function change() {
		// 	if(document.getElementById("status").innerHTML == "Not Accepting Undergraduates") {
		// 		document.getElementById("status").innerHTML = "Accepting Undergraduates";
		// 	} else {
		// 		document.getElementById("status").innerHTML = "Not Accepting Undergraduates";
		// 	}
		// }

		// function listen() {
		// 	document.getElementById("slider").addEventListener("click", change);
		// }
		// document.addEventListener("DOMContentLoaded", listen);
		$(document).ready(function() {
			$(".word_count").on('keyup', function() {
				var words = 0;
				if((this.value.match(/\S+/g)) != null) {
					words = this.value.match(/\S+/g).length;
				}
				if(words > 500) {
					// Split the string on first 200 words and rejoin on spaces
					var trimmed = $(this).val().split(/\s+/, 200).join(" ");
					// Add a space at the end to make sure more typing creates new words
					$(this).val(trimmed + " ");
				} else {
					$('#display_count').text(words);
				}
			});
		});
	</script>
</body>
{% endblock %}